<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Migrating Auth and Identity to ASP.NET Core 2.0 </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Migrating Auth and Identity to ASP.NET Core 2.0 ">
    <meta name="generator" content="docfx 2.24.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="/foo">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="migration/1x-to-2x/identity-2x">
<h1 id="migrating-authentication-and-identity-to-aspnet-core-20">Migrating Authentication and Identity to ASP.NET Core 2.0</h1>

<p>By <a href="https://github.com/scottaddie">Scott Addie</a> and <a href="https://github.com/HaoK">Hao Kung</a></p>
<p>ASP.NET Core 2.0 has a new model for authentication and <a class="xref" href="../../security/authentication/identity.html">Identity</a> which simplifies configuration by using services. ASP.NET Core 1.x applications that use authentication or Identity can be updated to use the new model as outlined below.</p>
<p><a name="auth-middleware"></a></p>
<h2 id="authentication-middleware-and-services">Authentication Middleware and Services</h2>
<p>In 1.x projects, authentication is configured via middleware. A middleware method is invoked for each authentication scheme you want to support.</p>
<p>The following 1.x example configures Facebook authentication with Identity in <em>Startup.cs</em>:</p>
<pre><code class="lang-csharp">public void ConfigureServices(IServiceCollection services)
{
    services.AddIdentity&lt;ApplicationUser, IdentityRole&gt;()
            .AddEntityFrameworkStores&lt;ApplicationDbContext&gt;();
}

public void Configure(IApplicationBuilder app, ILoggerFactory loggerfactory)
{
    app.UseIdentity();
    app.UseFacebookAuthentication(new FacebookOptions { 
        AppId = Configuration[&quot;auth:facebook:appid&quot;],
        AppSecret = Configuration[&quot;auth:facebook:appsecret&quot;]
    });
} 
</code></pre><p>In 2.0 projects, authentication is configured via services. Each authentication scheme is registered in the <code>ConfigureServices</code> method of <em>Startup.cs</em>. The <code>UseIdentity</code> method is replaced with <code>UseAuthentication</code>.</p>
<p>The following 2.0 example configures Facebook authentication with Identity in <em>Startup.cs</em>:</p>
<pre><code class="lang-csharp">public void ConfigureServices(IServiceCollection services)
{
    services.AddIdentity&lt;ApplicationUser, IdentityRole&gt;()
            .AddEntityFrameworkStores&lt;ApplicationDbContext&gt;();

    // If you want to tweak Identity cookies, they&#39;re no longer part of IdentityOptions.
    services.ConfigureApplicationCookie(options =&gt; options.LoginPath = &quot;/Account/LogIn&quot;);
    services.AddAuthentication()
            .AddFacebook(options =&gt; {
                options.AppId = Configuration[&quot;auth:facebook:appid&quot;];
                options.AppSecret = Configuration[&quot;auth:facebook:appsecret&quot;];
            });
}

public void Configure(IApplicationBuilder app, ILoggerFactory loggerfactory) {
    app.UseAuthentication();
}
</code></pre><p>The <code>UseAuthentication</code> method adds a single authentication middleware component which is responsible for automatic authentication and the handling of remote authentication requests. It replaces all of the individual middleware components with a single, common middleware component.</p>
<p>Below are 2.0 migration instructions for each major authentication scheme.</p>
<h3 id="cookie-based-authentication">Cookie-based Authentication</h3>
<p>Select one of the two options below, and make the necessary changes in <em>Startup.cs</em>:</p>
<ol>
<li><p>Use cookies with Identity</p>
<ul>
<li><p>Replace <code>UseIdentity</code> with <code>UseAuthentication</code> in the <code>Configure</code> method:</p>
<pre><code class="lang-csharp">app.UseAuthentication();
</code></pre></li>
<li><p>Invoke the <code>AddIdentity</code> method in the <code>ConfigureServices</code> method to add the cookie authentication services.</p>
</li>
<li><p>Optionally, invoke the <code>ConfigureApplicationCookie</code> or <code>ConfigureExternalCookie</code> method in the <code>ConfigureServices</code> method to tweak the Identity cookie settings.</p>
<pre><code class="lang-csharp">services.AddIdentity&lt;ApplicationUser, IdentityRole&gt;()
        .AddEntityFrameworkStores&lt;ApplicationDbContext&gt;()
        .AddDefaultTokenProviders();

services.ConfigureApplicationCookie(options =&gt; options.LoginPath = &quot;/Account/LogIn&quot;);
</code></pre></li>
</ul>
</li>
<li><p>Use cookies without Identity</p>
<ul>
<li><p>Replace the <code>UseCookieAuthentication</code> method call in the <code>Configure</code> method with <code>UseAuthentication</code>:</p>
<pre><code class="lang-csharp">app.UseAuthentication();
</code></pre></li>
<li><p>Invoke the <code>AddAuthentication</code> and <code>AddCookie</code> methods in the <code>ConfigureServices</code> method:</p>
<pre><code class="lang-csharp">// If you don&#39;t want the cookie to be automatically authenticated and assigned to HttpContext.User, 
// remove the CookieAuthenticationDefaults.AuthenticationScheme parameter passed to AddAuthentication.
services.AddAuthentication(CookieAuthenticationDefaults.AuthenticationScheme)
        .AddCookie(options =&gt; {
            options.LoginPath = &quot;/Account/LogIn&quot;;
            options.LogoutPath = &quot;/Account/LogOff&quot;;
        });
</code></pre></li>
</ul>
</li>
</ol>
<h3 id="jwt-bearer-authentication">JWT Bearer Authentication</h3>
<p>Make the following changes in <em>Startup.cs</em>:</p>
<ul>
<li><p>Replace the <code>UseJwtBearerAuthentication</code> method call in the <code>Configure</code> method with <code>UseAuthentication</code>:</p>
<pre><code class="lang-csharp">app.UseAuthentication();
</code></pre></li>
<li><p>Invoke the <code>AddJwtBearer</code> method in the <code>ConfigureServices</code> method:</p>
<pre><code class="lang-csharp">services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme)
        .AddJwtBearer(options =&gt; {
            options.Audience = &quot;http://localhost:5001/&quot;;
            options.Authority = &quot;http://localhost:5000/&quot;;
        });
</code></pre><p>  This code snippet doesn&#39;t use Identity, so the default scheme should be set by passing <code>JwtBearerDefaults.AuthenticationScheme</code> to the <code>AddAuthentication</code> method.</p>
</li>
</ul>
<h3 id="openid-connect-oidc-authentication">OpenID Connect (OIDC) Authentication</h3>
<p>Make the following changes in <em>Startup.cs</em>:</p>
<ul>
<li><p>Replace the <code>UseOpenIdConnectAuthentication</code> method call in the <code>Configure</code> method with <code>UseAuthentication</code>:</p>
<pre><code class="lang-csharp">app.UseAuthentication();
</code></pre></li>
<li><p>Invoke the <code>AddOpenIdConnect</code> method in the <code>ConfigureServices</code> method:</p>
<pre><code class="lang-csharp">services.AddAuthentication(options =&gt; {
    options.DefaultScheme = CookieAuthenticationDefaults.AuthenticationScheme;
    options.DefaultChallengeScheme = OpenIdConnectDefaults.AuthenticationScheme;
})
.AddCookie()
.AddOpenIdConnect(options =&gt; {
    options.Authority = Configuration[&quot;auth:oidc:authority&quot;];
    options.ClientId = Configuration[&quot;auth:oidc:clientid&quot;];
});
</code></pre></li>
</ul>
<h3 id="facebook-authentication">Facebook Authentication</h3>
<p>Make the following changes in <em>Startup.cs</em>:</p>
<ul>
<li><p>Replace the <code>UseFacebookAuthentication</code> method call in the <code>Configure</code> method with <code>UseAuthentication</code>:</p>
<pre><code class="lang-csharp">app.UseAuthentication();
</code></pre></li>
<li><p>Invoke the <code>AddFacebook</code> method in the <code>ConfigureServices</code> method:</p>
<pre><code class="lang-csharp">services.AddAuthentication()
        .AddFacebook(options =&gt; {
            options.AppId = Configuration[&quot;auth:facebook:appid&quot;];
            options.AppSecret = Configuration[&quot;auth:facebook:appsecret&quot;];
        });
</code></pre></li>
</ul>
<h3 id="google-authentication">Google Authentication</h3>
<p>Make the following changes in <em>Startup.cs</em>:</p>
<ul>
<li><p>Replace the <code>UseGoogleAuthentication</code> method call in the <code>Configure</code> method with <code>UseAuthentication</code>:</p>
<pre><code class="lang-csharp">app.UseAuthentication();
</code></pre></li>
<li><p>Invoke the <code>AddGoogle</code> method in the <code>ConfigureServices</code> method:</p>
<pre><code class="lang-csharp">services.AddAuthentication()
        .AddGoogle(options =&gt; {
            options.ClientId = Configuration[&quot;auth:google:clientid&quot;];
            options.ClientSecret = Configuration[&quot;auth:google:clientsecret&quot;];
        });    
</code></pre></li>
</ul>
<h3 id="microsoft-account-authentication">Microsoft Account Authentication</h3>
<p>Make the following changes in <em>Startup.cs</em>:</p>
<ul>
<li><p>Replace the <code>UseMicrosoftAccountAuthentication</code> method call in the <code>Configure</code> method with <code>UseAuthentication</code>:</p>
<pre><code class="lang-csharp">app.UseAuthentication();
</code></pre></li>
<li><p>Invoke the <code>AddMicrosoftAccount</code> method in the <code>ConfigureServices</code> method:</p>
<pre><code class="lang-csharp">services.AddAuthentication()
        .AddMicrosoftAccount(options =&gt; {
            options.ClientId = Configuration[&quot;auth:microsoft:clientid&quot;];
            options.ClientSecret = Configuration[&quot;auth:microsoft:clientsecret&quot;];
        });
</code></pre></li>
</ul>
<h3 id="twitter-authentication">Twitter Authentication</h3>
<p>Make the following changes in <em>Startup.cs</em>:</p>
<ul>
<li><p>Replace the <code>UseTwitterAuthentication</code> method call in the <code>Configure</code> method with <code>UseAuthentication</code>:</p>
<pre><code class="lang-csharp">app.UseAuthentication();
</code></pre></li>
<li><p>Invoke the <code>AddTwitter</code> method in the <code>ConfigureServices</code> method:</p>
<pre><code class="lang-csharp">services.AddAuthentication()
        .AddTwitter(options =&gt; {
            options.ConsumerKey = Configuration[&quot;auth:twitter:consumerkey&quot;];
            options.ConsumerSecret = Configuration[&quot;auth:twitter:consumersecret&quot;];
        });
</code></pre></li>
</ul>
<h3 id="setting-default-authentication-schemes">Setting Default Authentication Schemes</h3>
<p>In 1.x, the <code>AutomaticAuthenticate</code> and <code>AutomaticChallenge</code> properties were intended to be set on a single authentication scheme. There was no good way to enforce this.</p>
<p>In 2.0, these two properties have been removed as flags on the individual <code>AuthenticationOptions</code> instance and have moved into the base <a href="/aspnet/core/api/microsoft.aspnetcore.builder.authenticationoptions">AuthenticationOptions</a> class. The properties can be configured in the <code>AddAuthentication</code> method call within the <code>ConfigureServices</code> method of <em>Startup.cs</em>:</p>
<pre><code class="lang-csharp">services.AddAuthentication(CookieAuthenticationDefaults.AuthenticationScheme);
</code></pre><p>Alternatively, use an overloaded version of the <code>AddAuthentication</code> method to set more than one property. In the following overloaded method example, the default scheme is set to <code>CookieAuthenticationDefaults.AuthenticationScheme</code>. The authentication scheme may alternatively be specified within your individual <code>[Authorize]</code> attributes or authorization policies.</p>
<pre><code class="lang-csharp">services.AddAuthentication(options =&gt; {
    options.DefaultScheme = CookieAuthenticationDefaults.AuthenticationScheme;
    options.DefaultChallengeScheme = OpenIdConnectDefaults.AuthenticationScheme;
});
</code></pre><p>Define a default scheme in 2.0 if one of the following conditions is true:</p>
<ul>
<li>You want the user to be automatically signed in</li>
<li>You use the <code>[Authorize]</code> attribute or authorization policies without specifying schemes</li>
</ul>
<p>An exception to this rule is the <code>AddIdentity</code> method. This method adds cookies for you and sets the default authenticate and challenge schemes to the application cookie <code>IdentityConstants.ApplicationScheme</code>. Additionally, it sets the default sign-in scheme to the external cookie <code>IdentityConstants.ExternalScheme</code>.</p>
<p><a name="obsolete-interface"></a></p>
<h2 id="use-httpcontext-authentication-extensions">Use HttpContext Authentication Extensions</h2>
<p>The <code>IAuthenticationManager</code> interface is the main entry point into the 1.x authentication system. It has been replaced with a new set of <code>HttpContext</code> extension methods in the <code>Microsoft.AspNetCore.Authentication</code> namespace.</p>
<p>For example, 1.x projects reference an <code>Authentication</code> property:</p>
<pre><code class="lang-csharp" name="Main">// Clear the existing external cookie to ensure a clean login process
await HttpContext.Authentication.SignOutAsync(_externalCookieScheme);
</code></pre><p>In 2.0 projects, import the <code>Microsoft.AspNetCore.Authentication</code> namespace, and delete the <code>Authentication</code> property references:</p>
<pre><code class="lang-csharp" name="Main">// Clear the existing external cookie to ensure a clean login process
await HttpContext.SignOutAsync(IdentityConstants.ExternalScheme);
</code></pre><p><a name="windows-auth-changes"></a></p>
<h2 id="windows-authentication-httpsys--iisintegration">Windows Authentication (HTTP.sys / IISIntegration)</h2>
<p>There are two variations of Windows authentication:</p>
<ol>
<li>The host only allows authenticated users</li>
<li>The host allows both anonymous and authenticated users</li>
</ol>
<p>The first variation described above is unaffected by the 2.0 changes.</p>
<p>The second variation described above is affected by the 2.0 changes. As an example, you may be allowing anonymous users into your application at the IIS or <a class="xref" href="../../fundamentals/servers/weblistener.html">HTTP.sys</a> layer but authorizing users at the Controller level. In this scenario, set the default scheme to <code>IISDefaults.AuthenticationScheme</code> in the <code>ConfigureServices</code> method of <em>Startup.cs</em>:</p>
<pre><code class="lang-csharp">services.AddAuthentication(IISDefaults.AuthenticationScheme);
</code></pre><p>Failure to set the default scheme accordingly prevents the authorize request to challenge from working.</p>
<p><a name="identity-cookie-options"></a></p>
<h2 id="identitycookieoptions-instances">IdentityCookieOptions Instances</h2>
<p>A side effect of the 2.0 changes is the switch to using named options instead of cookie options instances. The ability to customize the Identity cookie scheme names is removed.</p>
<p>For example, 1.x projects use <a class="xref" href="../../mvc/controllers/dependency-injection.html#constructor-injection">constructor injection</a> to pass an <code>IdentityCookieOptions</code> parameter into <em>AccountController.cs</em>. The external cookie authentication scheme is accessed from the provided instance:</p>
<pre><code class="lang-csharp" name="Main" highlight-lines="4,11">public AccountController(
    UserManager&lt;ApplicationUser&gt; userManager,
    SignInManager&lt;ApplicationUser&gt; signInManager,
    IOptions&lt;IdentityCookieOptions&gt; identityCookieOptions,
    IEmailSender emailSender,
    ISmsSender smsSender,
    ILoggerFactory loggerFactory)
{
    _userManager = userManager;
    _signInManager = signInManager;
    _externalCookieScheme = identityCookieOptions.Value.ExternalCookieAuthenticationScheme;
    _emailSender = emailSender;
    _smsSender = smsSender;
    _logger = loggerFactory.CreateLogger&lt;AccountController&gt;();
}
</code></pre><p>The aforementioned constructor injection becomes unnecessary in 2.0 projects, and the <code>_externalCookieScheme</code> field can be deleted:</p>
<pre><code class="lang-csharp" name="Main">public AccountController(
    UserManager&lt;ApplicationUser&gt; userManager,
    SignInManager&lt;ApplicationUser&gt; signInManager,
    IEmailSender emailSender,
    ISmsSender smsSender,
    ILoggerFactory loggerFactory)
{
    _userManager = userManager;
    _signInManager = signInManager;
    _emailSender = emailSender;
    _smsSender = smsSender;
    _logger = loggerFactory.CreateLogger&lt;AccountController&gt;();
}
</code></pre><p>The <code>IdentityConstants.ExternalScheme</code> constant can be used directly:</p>
<pre><code class="lang-csharp" name="Main">// Clear the existing external cookie to ensure a clean login process
await HttpContext.SignOutAsync(IdentityConstants.ExternalScheme);
</code></pre><p><a name="navigation-properties"></a></p>
<h2 id="add-identityuser-poco-navigation-properties">Add IdentityUser POCO Navigation Properties</h2>
<p>The Entity Framework (EF) Core navigation properties of the base <code>IdentityUser</code> POCO (Plain Old CLR Object) have been removed. If your 1.x project used these properties, manually add them back to the 2.0 project:</p>
<pre><code class="lang-csharp">/// &lt;summary&gt;
/// Navigation property for the roles this user belongs to.
/// &lt;/summary&gt;
public virtual ICollection&lt;IdentityUserRole&lt;int&gt;&gt; Roles { get; } = new List&lt;IdentityUserRole&lt;int&gt;&gt;();

/// &lt;summary&gt;
/// Navigation property for the claims this user possesses.
/// &lt;/summary&gt;
public virtual ICollection&lt;IdentityUserClaim&lt;int&gt;&gt; Claims { get; } = new List&lt;IdentityUserClaim&lt;int&gt;&gt;();

/// &lt;summary&gt;
/// Navigation property for this users login accounts.
/// &lt;/summary&gt;
public virtual ICollection&lt;IdentityUserLogin&lt;int&gt;&gt; Logins { get; } = new List&lt;IdentityUserLogin&lt;int&gt;&gt;();
</code></pre><p>To prevent duplicate foreign keys when running EF Core Migrations, add the following to your <code>IdentityDbContext</code> class&#39; <code>OnModelCreating</code> method (after the <code>base.OnModelCreating();</code> call):</p>
<pre><code class="lang-csharp">protected override void OnModelCreating(ModelBuilder builder)
{
    base.OnModelCreating(builder);
    // Customize the ASP.NET Identity model and override the defaults if needed.
    // For example, you can rename the ASP.NET Identity table names and more.
    // Add your customizations after calling base.OnModelCreating(builder);

    builder.Entity&lt;ApplicationUser&gt;()
        .HasMany(e =&gt; e.Claims)
        .WithOne()
        .HasForeignKey(e =&gt; e.UserId)
        .IsRequired()
        .OnDelete(DeleteBehavior.Cascade);

    builder.Entity&lt;ApplicationUser&gt;()
        .HasMany(e =&gt; e.Logins)
        .WithOne()
        .HasForeignKey(e =&gt; e.UserId)
        .IsRequired()
        .OnDelete(DeleteBehavior.Cascade);

    builder.Entity&lt;ApplicationUser&gt;()
        .HasMany(e =&gt; e.Roles)
        .WithOne()
        .HasForeignKey(e =&gt; e.UserId)
        .IsRequired()
        .OnDelete(DeleteBehavior.Cascade);
}
</code></pre><p><a name="synchronous-method-removal"></a></p>
<h2 id="replace-getexternalauthenticationschemes">Replace GetExternalAuthenticationSchemes</h2>
<p>The synchronous method <code>GetExternalAuthenticationSchemes</code> was removed in favor of an asynchronous version. 1.x projects have the following code in <em>ManageController.cs</em>:</p>
<pre><code class="lang-csharp" name="Main">var otherLogins = _signInManager.GetExternalAuthenticationSchemes().Where(auth =&gt; userLogins.All(ul =&gt; auth.AuthenticationScheme != ul.LoginProvider)).ToList();
</code></pre><p>This method appears in <em>Login.cshtml</em> too:</p>
<pre><code class="lang-cshtml" name="Main">var loginProviders = SignInManager.GetExternalAuthenticationSchemes().ToList();
        &lt;div&gt;
            &lt;p&gt;
                @foreach (var provider in loginProviders)
                {
                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot; name=&quot;provider&quot; value=&quot;@provider.AuthenticationScheme&quot; title=&quot;Log in using your @provider.DisplayName account&quot;&gt;@provider.AuthenticationScheme&lt;/button&gt;
                }
            &lt;/p&gt;
        &lt;/div&gt;
    &lt;/form&gt;
}
</code></pre><p>In 2.0 projects, use the <code>GetExternalAuthenticationSchemesAsync</code> method:</p>
<pre><code class="lang-csharp" name="Main">var schemes = await _signInManager.GetExternalAuthenticationSchemesAsync();
var otherLogins = schemes.Where(auth =&gt; userLogins.All(ul =&gt; auth.Name != ul.LoginProvider)).ToList();
</code></pre><p>In <em>Login.cshtml</em>, the <code>AuthenticationScheme</code> property accessed in the <code>foreach</code> loop changes to <code>Name</code>:</p>
<pre><code class="lang-cshtml" name="Main">var loginProviders = (await SignInManager.GetExternalAuthenticationSchemesAsync()).ToList();
        &lt;div&gt;
            &lt;p&gt;
                @foreach (var provider in loginProviders)
                {
                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-default&quot; name=&quot;provider&quot; value=&quot;@provider.Name&quot; title=&quot;Log in using your @provider.DisplayName account&quot;&gt;@provider.DisplayName&lt;/button&gt;
                }
            &lt;/p&gt;
        &lt;/div&gt;
    &lt;/form&gt;
}
</code></pre><p><a name="property-change"></a></p>
<h2 id="manageloginsviewmodel-property-change">ManageLoginsViewModel Property Change</h2>
<p>A <code>ManageLoginsViewModel</code> object is used in the <code>ManageLogins</code> action of <em>ManageController.cs</em>. In 1.x projects, the object&#39;s <code>OtherLogins</code> property return type is <code>IList&lt;AuthenticationDescription&gt;</code>. This return type requires an import of <code>Microsoft.AspNetCore.Http.Authentication</code>:</p>
<pre><code class="lang-csharp" name="Main" highlight-lines="2,11">using System.Collections.Generic;
using Microsoft.AspNetCore.Http.Authentication;
using Microsoft.AspNetCore.Identity;

namespace AspNetCoreDotNetCore1App.Models.ManageViewModels
{
    public class ManageLoginsViewModel
    {
        public IList&lt;UserLoginInfo&gt; CurrentLogins { get; set; }

        public IList&lt;AuthenticationDescription&gt; OtherLogins { get; set; }
    }
}
</code></pre><p>In 2.0 projects, the return type changes to <code>IList&lt;AuthenticationScheme&gt;</code>. This new return type requires replacing the <code>Microsoft.AspNetCore.Http.Authentication</code> import with a <code>Microsoft.AspNetCore.Authentication</code> import.</p>
<pre><code class="lang-csharp" name="Main" highlight-lines="2,11">using System.Collections.Generic;
using Microsoft.AspNetCore.Authentication;
using Microsoft.AspNetCore.Identity;

namespace AspNetCoreDotNetCore2App.Models.ManageViewModels
{
    public class ManageLoginsViewModel
    {
        public IList&lt;UserLoginInfo&gt; CurrentLogins { get; set; }

        public IList&lt;AuthenticationScheme&gt; OtherLogins { get; set; }
    }
}
</code></pre><p><a name="additional-resources"></a></p>
<h2 id="additional-resources">Additional Resources</h2>
<p>For additional details and discussion, see the <a href="https://github.com/aspnet/Security/issues/1338">Discussion for Auth 2.0</a> issue on GitHub.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/aspnet/Docs/blob/w/riande/RP-EF/aspnetcore/migration/1x-to-2x/identity-2x.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2017 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
