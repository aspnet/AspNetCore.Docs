<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Handling requests with controllers in ASP.NET Core MVC </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Handling requests with controllers in ASP.NET Core MVC ">
    <meta name="generator" content="docfx 2.24.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="/foo">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="mvc/controllers/actions">
<h1 id="handling-requests-with-controllers-in-aspnet-core-mvc">Handling requests with controllers in ASP.NET Core MVC</h1>

<p>By <a href="https://ardalis.com/">Steve Smith</a> and <a href="https://github.com/scottaddie">Scott Addie</a></p>
<p>Controllers, actions, and action results are a fundamental part of how developers build apps using ASP.NET Core MVC.</p>
<h2 id="what-is-a-controller">What is a Controller?</h2>
<p>A controller is used to define and group a set of actions. An action (or <em>action method</em>) is a method on a controller which handles requests. Controllers logically group similar actions together. This aggregation of actions allows common sets of rules, such as routing, caching, and authorization, to be applied collectively. Requests are mapped to actions through <a class="xref" href="routing.html">routing</a>.</p>
<p>By convention, controller classes:</p>
<ul>
<li>Reside in the project&#39;s root-level <em>Controllers</em> folder</li>
<li>Inherit from <code>Microsoft.AspNetCore.Mvc.Controller</code></li>
</ul>
<p>A controller is an instantiable class in which at least one of the following conditions is true:</p>
<ul>
<li>The class name is suffixed with &quot;Controller&quot;</li>
<li>The class inherits from a class whose name is suffixed with &quot;Controller&quot;</li>
<li>The class is decorated with the <code>[Controller]</code> attribute</li>
</ul>
<p>A controller class must not have an associated <code>[NonController]</code> attribute.</p>
<p>Controllers should follow the <a href="http://deviq.com/explicit-dependencies-principle/">Explicit Dependencies Principle</a>. There are a couple approaches to implementing this principle. If multiple controller actions require the same service, consider using <a class="xref" href="dependency-injection.html#constructor-injection">constructor injection</a> to request those dependencies. If the service is needed by only a single action method, consider using <a class="xref" href="dependency-injection.html#action-injection-with-fromservices">Action Injection</a> to request the dependency.</p>
<p>Within the <strong>M</strong>odel-<strong>V</strong>iew-<strong>C</strong>ontroller pattern, a controller is responsible for the initial processing of the request and instantiation of the model. Generally, business decisions should be performed within the model.</p>
<p>The controller takes the result of the model&#39;s processing (if any) and returns either the proper view and its associated view data or the result of the API call. Learn more at <a class="xref" href="../overview.html">Overview of ASP.NET Core MVC</a> and <a class="xref" href="../../tutorials/first-mvc-app/start-mvc.html">Getting started with ASP.NET Core MVC and Visual Studio</a>.</p>
<p>The controller is a <em>UI-level</em> abstraction. Its responsibilities are to ensure request data is valid and to choose which view (or result for an API) should be returned. In well-factored apps, it does not directly include data access or business logic. Instead, the controller delegates to services handling these responsibilities.</p>
<h2 id="defining-actions">Defining Actions</h2>
<p>Public methods on a controller, except those decorated with the <code>[NonAction]</code> attribute, are actions. Parameters on actions are bound to request data and are validated using <a class="xref" href="../models/model-binding.html">model binding</a>. Model validation occurs for everything that&#39;s model-bound. The <code>ModelState.IsValid</code> property value indicates whether model binding and validation succeeded.</p>
<p>Action methods should contain logic for mapping a request to a business concern. Business concerns should typically be represented as services that the controller accesses through <a class="xref" href="dependency-injection.html">dependency injection</a>. Actions then map the result of the business action to an application state.</p>
<p>Actions can return anything, but frequently return an instance of <code>IActionResult</code> (or <code>Task&lt;IActionResult&gt;</code> for async methods) that produces a response. The action method is responsible for choosing <em>what kind of response</em>. The action result <em>does the responding</em>.</p>
<h3 id="controller-helper-methods">Controller Helper Methods</h3>
<p>Controllers usually inherit from <a href="https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.controller">Controller</a>, although this is not required. Deriving from <code>Controller</code> provides access to three categories of helper methods:</p>
<h4 id="1-methods-resulting-in-an-empty-response-body">1. Methods resulting in an empty response body</h4>
<p>No <code>Content-Type</code> HTTP response header is included, since the response body lacks content to describe.</p>
<p>There are two result types within this category: Redirect and HTTP Status Code.</p>
<ul>
<li><p><strong>HTTP Status Code</strong></p>
<p>  This type returns an HTTP status code. A couple helper methods of this type are <code>BadRequest</code>, <code>NotFound</code>, and <code>Ok</code>. For example, <code>return BadRequest();</code> produces a 400 status code when executed. When methods such as <code>BadRequest</code>, <code>NotFound</code>, and <code>Ok</code> are overloaded, they no longer qualify as HTTP Status Code responders, since content negotiation is taking place.</p>
</li>
<li><p><strong>Redirect</strong></p>
<p>  This type returns a redirect to an action or destination (using <code>Redirect</code>, <code>LocalRedirect</code>, <code>RedirectToAction</code>, or <code>RedirectToRoute</code>). For example, <code>return RedirectToAction(&quot;Complete&quot;, new {id = 123});</code> redirects to <code>Complete</code>, passing an anonymous object.</p>
<p>  The Redirect result type differs from the HTTP Status Code type primarily in the addition of a <code>Location</code> HTTP response header.</p>
</li>
</ul>
<h4 id="2-methods-resulting-in-a-non-empty-response-body-with-a-predefined-content-type">2. Methods resulting in a non-empty response body with a predefined content type</h4>
<p>Most helper methods in this category include a <code>ContentType</code> property, allowing you to set the <code>Content-Type</code> response header to describe the response body.</p>
<p>There are two result types within this category: <a class="xref" href="../views/overview.html">View</a> and <a class="xref" href="../models/formatting.html">Formatted Response</a>.</p>
<ul>
<li><p><strong>View</strong></p>
<p>  This type returns a view which uses a model to render HTML. For example, <code>return View(customer);</code> passes a model to the view for data-binding.</p>
</li>
<li><p><strong>Formatted Response</strong></p>
<p>  This type returns JSON or a similar data exchange format to represent an object in a specific manner. For example, <code>return Json(customer);</code> serializes the provided object into JSON format.</p>
<p>  Other common methods of this type include <code>File</code>, <code>PhysicalFile</code>, and <code>VirtualFile</code>. For example, <code>return PhysicalFile(customerFilePath, &quot;text/xml&quot;);</code> returns an XML file described by a <code>Content-Type</code> response header value of &quot;text/xml&quot;.</p>
</li>
</ul>
<h4 id="3-methods-resulting-in-a-non-empty-response-body-formatted-in-a-content-type-negotiated-with-the-client">3. Methods resulting in a non-empty response body formatted in a content type negotiated with the client</h4>
<p>This category is better known as <strong>Content Negotiation</strong>. <a class="xref" href="../models/formatting.html#content-negotiation">Content negotiation</a> applies whenever an action returns an <a href="https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.objectresult">ObjectResult</a> type or something other than an <a href="https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.mvc.iactionresult">IActionResult</a> implementation. An action that returns a non-<code>IActionResult</code> implementation (for example, <code>object</code>) also returns a Formatted Response.</p>
<p>Some helper methods of this type include <code>BadRequest</code>, <code>CreatedAtRoute</code>, and <code>Ok</code>. Examples of these methods include <code>return BadRequest(modelState);</code>, <code>return CreatedAtRoute(&quot;routename&quot;, values, newobject);</code>, and <code>return Ok(value);</code>, respectively. Note that <code>BadRequest</code> and <code>Ok</code> perform content negotiation only when passed a value; without being passed a value, they instead serve as HTTP Status Code result types. The <code>CreatedAtRoute</code> method, on the other hand, always performs content negotiation since its overloads all require that a value be passed.</p>
<h3 id="cross-cutting-concerns">Cross-Cutting Concerns</h3>
<p>Applications typically share parts of their workflow. Examples include an app that requires authentication to access the shopping cart, or an app that caches data on some pages. To perform logic before or after an action method, use a <em>filter</em>. Using <a class="xref" href="filters.html">Filters</a> on cross-cutting concerns can reduce duplication, allowing them to follow the <a href="http://deviq.com/don-t-repeat-yourself/">Don&#39;t Repeat Yourself (DRY) principle</a>.</p>
<p>Most filter attributes, such as <code>[Authorize]</code>, can be applied at the controller or action level depending upon the desired level of granularity.</p>
<p>Error handling and response caching are often cross-cutting concerns:</p>
<ul>
<li><a class="xref" href="filters.html#exception-filters">Error handling</a></li>
<li><a class="xref" href="../../performance/caching/response.html">Response Caching</a></li>
</ul>
<p>Many cross-cutting concerns can be handled using filters or custom <a class="xref" href="../../fundamentals/middleware.html">middleware</a>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/aspnet/Docs/blob/w/riande/RP-EF/aspnetcore/mvc/controllers/actions.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2017 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
