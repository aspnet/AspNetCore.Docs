<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Using AngularJS for Single Page Applications (SPAs) </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Using AngularJS for Single Page Applications (SPAs) ">
    <meta name="generator" content="docfx 2.24.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="/foo">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="client-side/angular">
<h1 id="using-angularjs-for-single-page-applications-spas-with-aspnet-core">Using AngularJS for Single Page Applications (SPAs) with ASP.NET Core</h1>

<p>By <a href="https://blog.falafel.com/falafel-software-recognized-sitefinity-website-year/">Venkata Koppaka</a> and <a href="https://scottaddie.com">Scott Addie</a></p>
<p>In this article, you will learn how to build a SPA-style ASP.NET application using AngularJS.</p>
<p><a href="https://github.com/aspnet/Docs/tree/master/aspnetcore/client-side/angular/sample">View or download sample code</a></p>
<h2 id="what-is-angularjs">What is AngularJS?</h2>
<p><a href="https://angularjs.org/">AngularJS</a> is a modern JavaScript framework from Google commonly used to work with Single Page Applications (SPAs). AngularJS is open sourced under MIT license, and the development progress of AngularJS can be followed on <a href="https://github.com/angular/angular.js">its GitHub repository</a>. The library is called Angular because HTML uses angular-shaped brackets.</p>
<p>AngularJS is not a DOM manipulation library like jQuery, but it uses a subset of jQuery called jQLite. AngularJS is primarily based on declarative HTML attributes that you can add to your HTML tags. You can try AngularJS in your browser using the <a href="https://www.codeschool.com/courses/shaping-up-with-angularjs">Code School website</a> or  <a href="https://www.w3schools.com/angular/">W3Schools website</a>.</p>
<p>This article focuses on AngularJS with some notes on where Angular is heading.</p>
<h2 id="getting-started">Getting started</h2>
<p>To start using AngularJS in your ASP.NET application, you must either install it as part of your project, or reference it from a content delivery network (CDN).</p>
<h3 id="installation">Installation</h3>
<p>There are several ways to add AngularJS to your application. If you’re starting a new ASP.NET Core web application in Visual Studio, you can add AngularJS using the built-in <a href="bower.html">Bower</a> support. Open <em>bower.json</em>, and add an entry to the <code>dependencies</code> property:</p>
<p><a name="angular-bower-json"></a></p>
<pre><code class="lang-json" name="Main" highlight-lines="9">{
  &quot;name&quot;: &quot;ASP.NET&quot;,
  &quot;private&quot;: true,
  &quot;dependencies&quot;: {
    &quot;bootstrap&quot;: &quot;3.3.5&quot;,
    &quot;jquery&quot;: &quot;2.1.4&quot;,
    &quot;jquery-validation&quot;: &quot;1.14.0&quot;,
    &quot;jquery-validation-unobtrusive&quot;: &quot;3.2.4&quot;,
    &quot;angular&quot;: &quot;1.5.7&quot;,
    &quot;angular-route&quot;: &quot;1.5.7&quot;
  }
}
</code></pre><p>Upon saving the <em>bower.json</em> file, Angular will be installed in your project&#39;s <em>wwwroot/lib</em> folder. Additionally, it will be listed within the <code>Dependencies/Bower</code> folder. See the screenshot below.</p>
<p><img src="angular/_static/angular-solution-explorer.png" alt="Solution Explorer with AngularJS Project"></p>
<p>Next, add a <code>&lt;script&gt;</code> reference to the bottom of the <code>&lt;body&gt;</code> section of your HTML page or <em>_Layout.cshtml</em> file, as shown here:</p>
<pre><code class="lang-html" name="Main" highlight-lines="4">&lt;environment names=&quot;Development&quot;&gt;
    &lt;script src=&quot;~/lib/jquery/dist/jquery.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;~/lib/bootstrap/dist/js/bootstrap.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;~/lib/angular/angular.js&quot;&gt;&lt;/script&gt;
&lt;/environment&gt;
</code></pre><p>It&#39;s recommended that production applications utilize CDNs for common libraries like AngularJS. You can reference AngularJS from one of several CDNs, such as this one:</p>
<pre><code class="lang-html" name="Main" highlight-lines="10">&lt;environment names=&quot;Staging,Production&quot;&gt;
    &lt;script src=&quot;//ajax.aspnetcdn.com/ajax/jquery/jquery-2.1.4.min.js&quot;
            asp-fallback-src=&quot;~/lib/jquery/dist/jquery.min.js&quot;
            asp-fallback-test=&quot;window.jQuery&quot;&gt;
    &lt;/script&gt;
    &lt;script src=&quot;//ajax.aspnetcdn.com/ajax/bootstrap/3.3.5/bootstrap.min.js&quot;
            asp-fallback-src=&quot;~/lib/bootstrap/dist/js/bootstrap.min.js&quot;
            asp-fallback-test=&quot;window.jQuery &amp;&amp; window.jQuery.fn &amp;&amp; window.jQuery.fn.modal&quot;&gt;
    &lt;/script&gt;
    &lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js&quot;
            asp-fallback-src=&quot;~/lib/angular/angular.min.js&quot;
            asp-fallback-test=&quot;window.angular&quot;&gt;
    &lt;/script&gt;
    &lt;script src=&quot;~/js/site.min.js&quot; asp-append-version=&quot;true&quot;&gt;&lt;/script&gt;
&lt;/environment&gt;
</code></pre><p>Once you have a reference to the <em>angular.js</em> script file, you&#39;re ready to begin using AngularJS in your web pages.</p>
<h2 id="key-components">Key components</h2>
<p>AngularJS includes a number of major components, such as <em>directives</em>, <em>templates</em>, <em>repeaters</em>, <em>modules</em>, <em>controllers</em>, <em>components</em>, <em>component router</em> and more. Let&#39;s examine how these components work together to add behavior to your web pages.</p>
<h3 id="directives">Directives</h3>
<p>AngularJS uses <a href="https://docs.angularjs.org/guide/directive">directives</a> to extend HTML with custom attributes and elements. AngularJS directives are defined via <code>data-ng-*</code> or <code>ng-*</code> prefixes (<code>ng</code> is short for angular). There are two types of AngularJS directives:</p>
<ol>
<li><p><strong>Primitive Directives</strong>: These are predefined by the Angular team and are part of the AngularJS framework.</p>
</li>
<li><p><strong>Custom Directives</strong>: These are custom directives that you can define.</p>
</li>
</ol>
<p>One of the primitive directives used in all AngularJS applications is the <code>ng-app</code> directive, which bootstraps the AngularJS application. This directive can be applied to the <code>&lt;body&gt;</code> tag or to a child element of the body. Let&#39;s see an example in action. Assuming you&#39;re in an ASP.NET project, you can either add an HTML file to the <code>wwwroot</code> folder, or add a new controller action and an associated view. In this case, I&#39;ve added a new <code>Directives</code> action method to <code>HomeController.cs</code>. The associated view is shown here:</p>
<pre><code class="lang-html" name="Main" highlight-lines="5,7">@{
    Layout = &quot;&quot;;
}
&lt;html&gt;
&lt;body ng-app&gt;
    &lt;h1&gt;Directives&lt;/h1&gt;
    {{2+2}}
    &lt;script src=&quot;~/lib/angular/angular.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>To keep these samples independent of one another, I&#39;m not using the shared layout file. You can see that we decorated the body tag with the <code>ng-app</code> directive to indicate this page is an AngularJS application. The <code>{{2+2}}</code> is an Angular data binding expression that you will learn more about in a moment. Here is the result if you run this application:</p>
<p><img src="angular/_static/simple-directive.png" alt="Simple Angular Directive"></p>
<p>Other primitive directives in AngularJS include:</p>
<p><code>ng-controller</code>
   Determines which JavaScript controller is bound to which view.</p>
<p><code>ng-model</code>
   Determines the model to which the values of an HTML element&#39;s properties are bound.</p>
<p><code>ng-init</code>
   Used to initialize the application data in the form of an expression for the current scope.</p>
<p><code>ng-if</code>
   Removes or recreates the given HTML element in the DOM based on the truthiness of the expression provided.</p>
<p><code>ng-repeat</code>
   Repeats a given block of HTML over a set of data.</p>
<p><code>ng-show</code>
   Shows or hides the given HTML element based on the expression provided.</p>
<p>For a full list of all primitive directives supported in AngularJS, please refer to the <a href="https://docs.angularjs.org/api/ng/directive">directive documentation section on the AngularJS documentation website</a>.</p>
<h3 id="data-binding">Data binding</h3>
<p>AngularJS provides <a href="https://docs.angularjs.org/guide/databinding">data binding</a> support out-of-the-box using either the <code>ng-bind</code> directive or a data binding expression syntax such as <code>{{expression}}</code>. AngularJS supports two-way data binding where data from a model is kept in synchronization with a view template at all times. Any changes to the view are automatically reflected in the model. Likewise, any changes in the model are reflected in the view.</p>
<p>Create either an HTML file or a controller action with an accompanying view named <code>Databinding</code>. Include the following in the view:</p>
<pre><code class="lang-html" name="Main" highlight-lines="8,9,10">@{
    Layout = &quot;&quot;;
}
&lt;html&gt;
&lt;body ng-app&gt;
    &lt;h1&gt;Databinding&lt;/h1&gt;

    &lt;div ng-init=&quot;firstName=&#39;John&#39;; lastName=&#39;Doe&#39;;&quot;&gt;
        &lt;strong&gt;First name:&lt;/strong&gt; {{firstName}} &lt;br /&gt;
        &lt;strong&gt;Last name:&lt;/strong&gt; &lt;span ng-bind=&quot;lastName&quot; /&gt;
    &lt;/div&gt;

    &lt;script src=&quot;~/lib/angular/angular.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>Notice that you can display model values using either directives or data binding (<code>ng-bind</code>). The resulting page should look like this:</p>
<p><img src="angular/_static/simple-databinding.png" alt="Simple Databinding"></p>
<h3 id="templates">Templates</h3>
<p><a href="https://docs.angularjs.org/guide/templates">Templates</a> in AngularJS are just plain HTML pages decorated with AngularJS directives and artifacts. A template in AngularJS is a mixture of directives, expressions, filters, and controls that combine with HTML to form the view.</p>
<p>Add another view to demonstrate templates, and add the following to it:</p>
<pre><code class="lang-html" name="Main" highlight-lines="8,9,10">@{
    Layout = &quot;&quot;;
}
&lt;html&gt;
&lt;body ng-app&gt;
    &lt;h1&gt;Templates&lt;/h1&gt;

    &lt;div ng-init=&quot;personName=&#39;John Doe&#39;&quot;&gt;
        &lt;input ng-model=&quot;personName&quot; /&gt; {{personName}}
    &lt;/div&gt;

    &lt;script src=&quot;~/lib/angular/angular.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>The template has AngularJS directives like <code>ng-app</code>, <code>ng-init</code>, <code>ng-model</code> and data binding expression syntax to bind the <code>personName</code> property. Running in the browser, the view looks like the screenshot below:</p>
<p><img src="angular/_static/simple-templates-1.png" alt="Simple Templates example 1"></p>
<p>If you change the name by typing in the input field, you will see the text next to the input field dynamically update, showing Angular two-way data binding in action.</p>
<p><img src="angular/_static/simple-templates-2.png" alt="Simple Templates example 2"></p>
<h3 id="expressions">Expressions</h3>
<p><a href="https://docs.angularjs.org/guide/expression">Expressions</a> in AngularJS are JavaScript-like code snippets that are written inside the <code>{{ expression }}</code> syntax. The data from these expressions is bound to HTML the same way as <code>ng-bind</code> directives. The main difference between AngularJS expressions and regular JavaScript expressions is that AngularJS expressions are evaluated against the <code>$scope</code> object in AngularJS.</p>
<p>The AngularJS expressions in the sample below bind <code>personName</code> and a simple JavaScript calculated expression:</p>
<pre><code class="lang-html" name="Main" highlight-lines="8,9,10">@{
    Layout = &quot;&quot;;
}
&lt;html&gt;
&lt;body ng-app&gt;
    &lt;h1&gt;Expressions&lt;/h1&gt;

    &lt;div ng-init=&quot;personName=&#39;John Doe&#39;&quot;&gt;
        Person&#39;s name is: {{personName}} &lt;br /&gt;
        Simple JavaScript calculation of 1 + 2: {{1+2}}
    &lt;/div&gt;

    &lt;script src=&quot;~/lib/angular/angular.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>The example running in the browser displays the <code>personName</code> data and the results of the calculation:</p>
<p><img src="angular/_static/simple-expressions.png" alt="Simple Expressions"></p>
<h3 id="repeaters">Repeaters</h3>
<p>Repeating in AngularJS is done via a primitive directive called <code>ng-repeat</code>. The <code>ng-repeat</code> directive repeats a given HTML element in a view over the length of a repeating data array. Repeaters in AngularJS can repeat over an array of strings or objects. Here is a sample usage of repeating over an array of strings:</p>
<pre><code class="lang-html" name="Main" highlight-lines="8,10,11">@{
    Layout = &quot;&quot;;
}
&lt;html&gt;
&lt;body ng-app&gt;
    &lt;h1&gt;Repeaters&lt;/h1&gt;

    &lt;div ng-init=&quot;names=[&#39;John Doe&#39;, &#39;Mary Jane&#39;, &#39;Bob Parker&#39;]&quot;&gt;
        &lt;ul&gt;
            &lt;li ng-repeat=&quot;name in names&quot;&gt;
                {{name}}
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;

    &lt;script src=&quot;~/lib/angular/angular.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>The <a href="https://docs.angularjs.org/api/ng/directive/ngRepeat">repeat directive</a> outputs a series of list items in an unordered list, as you can see in the developer tools shown in this screenshot:</p>
<p><img src="angular/_static/repeater.png" alt="Repeater Example"></p>
<p>Here is an example that repeats over an array of objects. The <code>ng-init</code> directive establishes a <code>names</code> array, where each element is an object containing first and last names. The <code>ng-repeat</code> assignment, <code>name in names</code>, outputs a list item for every array element.</p>
<pre><code class="lang-html" name="Main" highlight-lines="8,9,10,11,13,14">@{
    Layout = &quot;&quot;;
}
&lt;html&gt;
&lt;body ng-app&gt;
    &lt;h1&gt;Repeaters2&lt;/h1&gt;

    &lt;div ng-init=&quot;names=[
		{firstName:&#39;John&#39;, lastName:&#39;Doe&#39;},
		{firstName:&#39;Mary&#39;, lastName:&#39;Jane&#39;},
		{firstName:&#39;Bob&#39;, lastName:&#39;Parker&#39;}]&quot;&gt;
        &lt;ul&gt;
            &lt;li ng-repeat=&quot;name in names&quot;&gt;
                {{name.firstName + &#39; &#39; + name.lastName}}
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;

    &lt;script src=&quot;~/lib/angular/angular.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>The output in this case is the same as in the previous example.</p>
<p>Angular provides some additional directives that can help provide behavior based on where the loop is in its execution.</p>
<p><code>$index</code></p>
<p>Use <code>$index</code> in the <code>ng-repeat</code> loop to determine which index position your loop currently is on.</p>
<p><code>$even</code> and <code>$odd</code></p>
<p>Use <code>$even</code> in the <code>ng-repeat</code> loop to determine whether the current index in your loop is an even indexed row. Similarly, use <code>$odd</code> to determine if the current index is an odd indexed row.</p>
<p><code>$first</code> and <code>$last</code></p>
<p>Use <code>$first</code> in the <code>ng-repeat</code> loop to determine whether the current index in your loop is the first row. Similarly, use <code>$last</code> to determine if the current index is the last row.</p>
<p>Below is a sample that shows <code>$index</code>, <code>$even</code>, <code>$odd</code>, <code>$first</code>, and <code>$last</code> in action:</p>
<pre><code class="lang-html" name="Main" highlight-lines="14,15,16,17,18">@{
    Layout = &quot;&quot;;
}
&lt;html&gt;
&lt;body ng-app&gt;
    &lt;h1&gt;Repeaters2&lt;/h1&gt;

    &lt;div ng-init=&quot;names=[
		{firstName:&#39;John&#39;, lastName:&#39;Doe&#39;},
		{firstName:&#39;Mary&#39;, lastName:&#39;Jane&#39;},
		{firstName:&#39;Bob&#39;, lastName:&#39;Parker&#39;}]&quot;&gt;
        &lt;ul&gt;
            &lt;li ng-repeat=&quot;name in names&quot;&gt;
                {{name.firstName + &#39; &#39; + name.lastName}} at index {{$index}}
                &lt;span ng-show=&quot;{{$first}}&quot;&gt;, the first position&lt;/span&gt;
                &lt;span ng-show=&quot;{{$last}}&quot;&gt;, the last position&lt;/span&gt;
                &lt;span ng-show=&quot;{{$odd}}&quot;&gt;,which is odd-numbered.&lt;/span&gt;
                &lt;span ng-show=&quot;{{$even}}&quot;&gt;,which is even-numbered.&lt;/span&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;

    &lt;script src=&quot;~/lib/angular/angular.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>Here is the resulting output:</p>
<p><img src="angular/_static/repeaters2.png" alt="Repeater example 2"></p>
<h3 id="scope">$scope</h3>
<p><code>$scope</code> is a JavaScript object that acts as glue between the view (template) and the controller (explained below). A view template in AngularJS only knows about the values attached to the <code>$scope</code> object in the controller.</p>
<div class="NOTE"><h5>Note</h5><p>In the MVVM world, the <code>$scope</code> object in AngularJS is often defined as the ViewModel. The AngularJS team refers to the <code>$scope</code> object as the Data-Model. <a href="https://docs.angularjs.org/guide/scope">Learn more about Scopes in AngularJS</a>.</p>
</div>
<p>Below is a simple example showing how to set properties on <code>$scope</code> within a separate JavaScript file, <em>scope.js</em>:</p>
<pre><code class="lang-html" name="Main" highlight-lines="2,3">var personApp = angular.module(&#39;personApp&#39;, []);
personApp.controller(&#39;personController&#39;, [&#39;$scope&#39;, function ($scope) {
    $scope.name = &#39;Mary Jane&#39;;
}]);
</code></pre><p>Observe the <code>$scope</code> parameter passed to the controller on line 2. This object is what the view knows about. On line 3, we are setting a property called &quot;name&quot; to &quot;Mary Jane&quot;.</p>
<p>What happens when a particular property is not found by the view? The view defined below refers to &quot;name&quot; and &quot;age&quot; properties:</p>
<pre><code class="lang-html" name="Main" highlight-lines="9,10,14">@{
    Layout = &quot;&quot;;
}
&lt;html&gt;
&lt;body ng-app=&quot;personApp&quot;&gt;
    &lt;h1&gt;Scope&lt;/h1&gt;

    &lt;div ng-controller=&quot;personController&quot;&gt;
        &lt;strong&gt;Name:&lt;/strong&gt; {{name}} &lt;br /&gt;
        &lt;strong&gt;Missing Property (age):&lt;/strong&gt; {{age}}
    &lt;/div&gt;

    &lt;script src=&quot;~/lib/angular/angular.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;~/app/scope.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>Notice on line 9 that we are asking Angular to show the &quot;name&quot; property using expression syntax. Line 10 then refers to &quot;age&quot;, a property that does not exist. The running example shows the name set to &quot;Mary Jane&quot; and nothing for age. Missing properties are ignored.</p>
<p><img src="angular/_static/scope.png" alt="Scope example"></p>
<h3 id="modules">Modules</h3>
<p>A <a href="https://docs.angularjs.org/guide/module">module</a> in AngularJS is a collection of controllers, services, directives, etc. The <code>angular.module()</code> function call is used to create, register, and retrieve modules in AngularJS. All modules, including those shipped by the AngularJS team and third party libraries, should be registered using the <code>angular.module()</code> function.</p>
<p>Below is a snippet of code that shows how to create a new module in AngularJS. The first parameter is the name of the module. The second parameter defines dependencies on other modules. Later in this article, we will be showing how to pass these dependencies to an <code>angular.module()</code> method call.</p>
<pre><code class="lang-javascript">var personApp = angular.module(&#39;personApp&#39;, []);
</code></pre><p>Use the <code>ng-app</code> directive to represent an AngularJS module on the page. To use a module, assign the name of the module, <code>personApp</code> in this example, to the <code>ng-app</code> directive in our template.</p>
<pre><code class="lang-html">&lt;body ng-app=&quot;personApp&quot;&gt;
</code></pre><h3 id="controllers">Controllers</h3>
<p><a href="https://docs.angularjs.org/guide/controller">Controllers</a> in AngularJS are the first point of entry for your code. The <code>&lt;module name&gt;.controller()</code> function call is used to create and register controllers in AngularJS. The <code>ng-controller</code> directive is used to represent an AngularJS controller on the HTML page. The role of the controller in Angular is to set state and behavior of the data model (<code>$scope</code>). Controllers should not be used to manipulate the DOM directly.</p>
<p>Below is a snippet of code that registers a new controller. The <code>personApp</code> variable in the snippet references an Angular module, which is defined on line 2.</p>
<pre><code class="lang-javascript" name="Main" highlight-lines="2,5">// module
var personApp = angular.module(&#39;personApp&#39;, []);

// controller
personApp.controller(&#39;personController&#39;, function ($scope) {
    $scope.firstName = &quot;Mary&quot;;
    $scope.lastName = &quot;Jane&quot;
});
</code></pre><p>The view using the <code>ng-controller</code> directive assigns the controller name:</p>
<pre><code class="lang-html" name="Main" highlight-lines="8,14">@{
    Layout = &quot;&quot;;
}
&lt;html&gt;
&lt;body ng-app=&quot;personApp&quot;&gt;
    &lt;h1&gt;Controllers&lt;/h1&gt;

    &lt;div ng-controller=&quot;personController&quot;&gt;
        &lt;strong&gt;First Name:&lt;/strong&gt; {{firstName}} &lt;br /&gt;
        &lt;strong&gt;Last Name:&lt;/strong&gt; {{lastName}}
    &lt;/div&gt;

    &lt;script src=&quot;~/lib/angular/angular.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;~/app/controllers.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>The page shows &quot;Mary&quot; and &quot;Jane&quot; that correspond to the <code>firstName</code> and <code>lastName</code> properties attached to the <code>$scope</code> object:</p>
<p><img src="angular/_static/controllers.png" alt="Controller example"></p>
<h3 id="components">Components</h3>
<p><a href="https://docs.angularjs.org/guide/component">Components</a> in Angular 1.5.x allow for the encapsulation and capability of creating individual HTML elements. In Angular 1.4.x you could achieve the same feature using the .directive() method.</p>
<p>By using the .component() method, development is simplified gaining the functionality of the directive and the controller. Other benefits include; scope isolation, best practices are inherent, and migration to Angular 2 becomes an easier task. The <code>&lt;module name&gt;.component()</code> function call is used to create and register components in AngularJS.</p>
<p>Below is a snippet of code that registers a new component. The <code>personApp</code> variable in the snippet references an Angular module, which is defined on line 2.</p>
<pre><code class="lang-javascript" name="Main" highlight-lines="2,5,13">// module
var personApp = angular.module(&#39;personApp&#39;, []);

// controller
var PersonController = function(){
	
	var vm = this;
	vm.firstName = &quot;Aftab&quot;;
	vm.lastName = &quot;Ansari&quot;;
}

// component
personApp.component(&#39;personComponent&#39;, {
    templateUrl:&#39;/app/partials/personcomponent.html&#39;,
	controller:PersonController,
	controllerAs:&#39;vm&#39;
	
});
</code></pre><p>The view where we are displaying the custom HTML element.</p>
<pre><code class="lang-html" name="Main" highlight-lines="8">@{
    Layout = &quot;&quot;;
}
&lt;html&gt;
&lt;body ng-app=&quot;personApp&quot;&gt;
    &lt;h1&gt;Components&lt;/h1&gt;

	&lt;person-component&gt;&lt;/person-component&gt;
   
    &lt;script src=&quot;~/lib/angular/angular.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;~/app/components.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>The associated template used by component:</p>
<pre><code class="lang-html" name="Main" highlight-lines="2,3">&lt;div&gt;
    &lt;strong&gt;First Name:&lt;/strong&gt; {{vm.firstName}} &lt;br /&gt;
    &lt;strong&gt;Last Name:&lt;/strong&gt; {{vm.lastName}}
&lt;/div&gt;
</code></pre><p>The page shows &quot;Aftab&quot; and &quot;Ansari&quot; that correspond to the <code>firstName</code> and <code>lastName</code> properties attached to the <code>vm</code> object:</p>
<p><img src="angular/_static/components.png" alt="Components example"></p>
<h3 id="services">Services</h3>
<p><a href="https://docs.angularjs.org/guide/services">Services</a> in AngularJS are commonly used for shared code that is abstracted away into a file which can be used throughout the lifetime of an Angular application. Services are lazily instantiated, meaning that there will not be an instance of a service unless a component that depends on the service gets used. Factories are an example of a service used in AngularJS applications. Factories are created using the <code>myApp.factory()</code> function call, where <code>myApp</code> is the module.</p>
<p>Below is an example that shows how to use factories in AngularJS:</p>
<pre><code class="lang-javascript" name="Main" highlight-lines="1">personApp.factory(&#39;personFactory&#39;, function () {
    function getName() {
        return &quot;Mary Jane&quot;;
    }

    var service = {
        getName: getName
    };

    return service;
});
</code></pre><p>To call this factory from the controller, pass <code>personFactory</code> as a parameter to the <code>controller</code> function:</p>
<pre><code class="lang-javascript">personApp.controller(&#39;personController&#39;, function($scope,personFactory) {
  $scope.name = personFactory.getName();
});
</code></pre><h3 id="using-services-to-talk-to-a-rest-endpoint">Using services to talk to a REST endpoint</h3>
<p>Below is an end-to-end example using services in AngularJS to interact with an ASP.NET Core Web API endpoint. The example gets data from the Web API and displays the data in a view template. Let&#39;s start with the view first:</p>
<pre><code class="lang-html" name="Main" highlight-lines="5,8,10,17,18,19">@{
    Layout = &quot;&quot;;
}
&lt;html&gt;
&lt;body ng-app=&quot;PersonsApp&quot;&gt;
    &lt;h1&gt;People&lt;/h1&gt;

    &lt;div ng-controller=&quot;personController&quot;&gt;
        &lt;ul&gt;
            &lt;li ng-repeat=&quot;person in people&quot;&gt;
                &lt;h2&gt;{{person.FirstName}} {{person.LastName}}&lt;/h2&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;

    &lt;script src=&quot;~/lib/angular/angular.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;~/app/personApp.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;~/app/personFactory.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;~/app/personController.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>In this view, we have an Angular module called <code>PersonsApp</code> and a controller called <code>personController</code>. We are using <code>ng-repeat</code> to iterate over the list of persons. We are referencing three custom JavaScript files on lines 17-19.</p>
<p>The <em>personApp.js</em> file is used to register the <code>PersonsApp</code> module; and, the syntax is similar to previous examples. We are using the <code>angular.module</code> function to create a new instance of the module that we will be working with.</p>
<pre><code class="lang-javascript" name="Main" highlight-lines="3">(function () {
    &#39;use strict&#39;;
    var app = angular.module(&#39;PersonsApp&#39;, []);
})();
</code></pre><p>Let&#39;s take a look at <em>personFactory.js</em>, below. We are calling the module’s <code>factory</code> method to create a factory. Line 12 shows the built-in Angular <code>$http</code> service retrieving people information from a web service.</p>
<pre><code class="lang-javascript" name="Main" highlight-lines="6,7,12">(function () {
    &#39;use strict&#39;;

    var serviceId = &#39;personFactory&#39;;

    angular.module(&#39;PersonsApp&#39;).factory(serviceId,
        [&#39;$http&#39;, personFactory]);

    function personFactory($http) {

        function getPeople() {
            return $http.get(&#39;/api/people&#39;);
        }

        var service = {
            getPeople: getPeople
        };

        return service;
    }
})();
</code></pre><p>In <em>personController.js</em>, we are calling the module’s <code>controller</code> method to create the controller. The <code>$scope</code> object&#39;s <code>people</code> property is assigned the data returned from the personFactory (line 13).</p>
<pre><code class="lang-javascript" name="Main" highlight-lines="6,7,13">(function () {
    &#39;use strict&#39;;

    var controllerId = &#39;personController&#39;;

    angular.module(&#39;PersonsApp&#39;).controller(controllerId,
        [&#39;$scope&#39;, &#39;personFactory&#39;, personController]);

    function personController($scope, personFactory) {
        $scope.people = [];

        personFactory.getPeople().then(
            // callback function for successful http request
            function success(response) {
                $scope.people = response.data;
            },
            // callback function for error in http request
            function error(response) {
                // log errors
            }
        );
    }
})();
</code></pre><p>Let&#39;s take a quick look at the Web API and the model behind it. The <code>Person</code> model is a POCO (Plain Old CLR Object) with <code>Id</code>, <code>FirstName</code>, and <code>LastName</code> properties:</p>
<pre><code class="lang-csharp" name="Main">namespace AngularSample.Models
{
    public class Person
    {
        public int Id { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
    }
}
</code></pre><p>The <code>Person</code> controller returns a JSON-formatted list of <code>Person</code> objects:</p>
<pre><code class="lang-csharp" name="Main" highlight-lines="9,10,19">using AngularSample.Models;
using Microsoft.AspNetCore.Mvc;
using System.Collections.Generic;

namespace AngularSample.Controllers.Api
{
    public class PersonController : Controller
    {
        [Route(&quot;/api/people&quot;)]
        public JsonResult GetPeople()
        {
            var people = new List&lt;Person&gt;()
            {
                new Person { Id = 1, FirstName = &quot;John&quot;, LastName = &quot;Doe&quot; },
                new Person { Id = 1, FirstName = &quot;Mary&quot;, LastName = &quot;Jane&quot; },
                new Person { Id = 1, FirstName = &quot;Bob&quot;, LastName = &quot;Parker&quot; }
            };

            // default behavior will convert fields in model to camelCase in Json object
            return Json(people);
        }
    }
}
</code></pre><p>Let&#39;s see the application in action:</p>
<p><img src="angular/_static/rest-bound.png" alt="Controller displaying REST results"></p>
<p>You can <a href="https://github.com/aspnet/Docs/tree/master/aspnetcore/client-side/angular/sample">view the application&#39;s structure on GitHub</a>.</p>
<div class="NOTE"><h5>Note</h5><p>For more on structuring AngularJS applications, see <a href="https://github.com/johnpapa/angular-styleguide">John Papa&#39;s Angular Style Guide</a></p>
</div>
<p>&nbsp;</p>
<div class="NOTE"><h5>Note</h5><p>To create AngularJS module, controller, factory, directive and view files easily, be sure to check out Sayed Hashimi&#39;s <a href="http://sidewaffle.com/">SideWaffle template pack for Visual Studio</a>. Sayed Hashimi is a Senior Program Manager on the Visual Studio Web Team at Microsoft and SideWaffle templates are considered the gold standard. At the time of this writing, SideWaffle is available for Visual Studio 2012, 2013, and 2015.</p>
</div>
<h3 id="routing-and-multiple-views">Routing and multiple views</h3>
<p>AngularJS has a built-in route provider to handle SPA (Single Page Application) based navigation. To work with routing in AngularJS, you must add the <code>angular-route</code> library using Bower. You can see in the <a href="#angular-bower-json">bower.json</a> file referenced at the start of this article that we are already referencing it in our project.</p>
<p>After you install the package, add the script reference (<em>angular-route.js</em>) to your view.</p>
<p>Now let&#39;s take the Person App we have been building and add navigation to it. First, we will make a copy of the app by creating a new <code>PeopleController</code> action called <code>Spa</code> and a corresponding <code>Spa.cshtml</code> view by copying the Index.cshtml view in the <code>People</code> folder. Add a script reference to <code>angular-route</code> (see line 11). Also add a <code>div</code> marked with the <code>ng-view</code> directive (see line 6) as a placeholder to place views in. We are going to be using several additional <em>.js</em> files which are referenced on lines 13-16.</p>
<pre><code class="lang-html" name="Main" highlight-lines="6,11,12,13,14,15,16">@{
    Layout = &quot;&quot;;
}
&lt;html&gt;
&lt;body ng-app=&quot;personApp&quot;&gt;
    &lt;div ng-view&gt;

    &lt;/div&gt;

    &lt;script src=&quot;~/lib/angular/angular.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;~/lib/angular-route/angular-route.js&quot;&gt;&lt;/script&gt;

    &lt;script src=&quot;~/app/personModule.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;~/app/personRoutes.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;~/app/personListController.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;~/app/personDetailController.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>Let&#39;s take a look at <em>personModule.js</em> file to see how we are instantiating the module with routing. We are passing <code>ngRoute</code> as a library into the module. This module handles routing in our application.</p>
<pre><code class="lang-javascript" name="Main">var personApp = angular.module(&#39;personApp&#39;, [&#39;ngRoute&#39;]);
</code></pre><p>The <em>personRoutes.js</em> file, below, defines routes based on the route provider. Lines 4-7 define navigation by effectively saying, when a URL with <code>/persons</code> is requested, use a template called <code>partials/personlist</code> by working through <code>personListController</code>. Lines 8-11 indicate a detail page with a route parameter of <code>personId</code>. If the URL doesn&#39;t match one of the patterns, Angular defaults to the <code>/persons</code> view.</p>
<pre><code class="lang-javascript" name="Main" highlight-lines="4,5,6,7,8,9,10,11,13">personApp.config([&#39;$routeProvider&#39;,
    function ($routeProvider) {
        $routeProvider.
            when(&#39;/persons&#39;, {
                templateUrl: &#39;/app/partials/personlist.html&#39;,
                controller: &#39;personListController&#39;
            }).
            when(&#39;/persons/:personId&#39;, {
                templateUrl: &#39;/app/partials/persondetail.html&#39;,
                controller: &#39;personDetailController&#39;
            }).
            otherwise({
                redirectTo: &#39;/persons&#39;
            })
    }
]);
</code></pre><p>The <code>personlist.html</code> file is a partial view containing only the HTML needed to display person list.</p>
<pre><code class="lang-html" name="Main" highlight-lines="3">&lt;div&gt;
    &lt;h1&gt;PERSONS PAGE&lt;/h1&gt;
    &lt;span ng-bind=&quot;message&quot;/&gt;
&lt;/div&gt;
</code></pre><p>The controller is defined by using the module&#39;s <code>controller</code> function in <em>personListController.js</em>.</p>
<pre><code class="lang-javascript" name="Main" highlight-lines="1">personApp.controller(&#39;personListController&#39;, function ($scope) {
    $scope.message = &quot;You are on the Persons List Page.&quot;;
})
</code></pre><p>If we run this application and navigate to the <code>people/spa#/persons</code> URL, we will see:</p>
<p><img src="angular/_static/spa-persons.png" alt="Persons List View"></p>
<p>If we navigate to a detail page, for example <code>people/spa#/persons/2</code>, we will see the detail partial view:</p>
<p><img src="angular/_static/spa-persons-2.png" alt="Person Detail View"></p>
<p>You can view the full source and any files not shown in this article on <a href="https://github.com/aspnet/Docs/tree/master/aspnetcore/client-side/angular/sample">GitHub</a>.</p>
<h3 id="event-handlers">Event Handlers</h3>
<p>There are a number of directives in AngularJS that add event-handling capabilities to the input elements in your HTML DOM. Below is a list of the events that are built into AngularJS.</p>
<ul>
<li><p><code>ng-click</code></p>
</li>
<li><p><code>ng-dbl-click</code></p>
</li>
<li><p><code>ng-mousedown</code></p>
</li>
<li><p><code>ng-mouseup</code></p>
</li>
<li><p><code>ng-mouseenter</code></p>
</li>
<li><p><code>ng-mouseleave</code></p>
</li>
<li><p><code>ng-mousemove</code></p>
</li>
<li><p><code>ng-keydown</code></p>
</li>
<li><p><code>ng-keyup</code></p>
</li>
<li><p><code>ng-keypress</code></p>
</li>
<li><p><code>ng-change</code></p>
</li>
</ul>
<div class="NOTE"><h5>Note</h5><p>You can add your own event handlers using the <a href="https://docs.angularjs.org/guide/directive">custom directives feature in AngularJS</a>.</p>
</div>
<p>Let&#39;s look at how the <code>ng-click</code> event is wired up. Create a new JavaScript file named <em>eventHandlerController.js</em>, and add the following to it:</p>
<pre><code class="lang-javascript" name="Main" highlight-lines="5,6,7">personApp.controller(&#39;eventHandlerController&#39;, function ($scope) {
    $scope.firstName = &#39;Mary&#39;;
    $scope.lastName = &#39;Jane&#39;;

    $scope.sayName = function () {
        alert(&#39;Welcome, &#39; + $scope.firstName + &#39; &#39; + $scope.lastName);
    }
});
</code></pre><p>Notice the new <code>sayName</code> function in <code>eventHandlerController</code> on line 5 above. All the method is doing for now is showing a JavaScript alert to the user with a welcome message.</p>
<p>The view below binds a controller function to an AngularJS event. Line 9 has a button on which the <code>ng-click</code> Angular directive has been applied. It calls our <code>sayName</code> function, which is attached to the <code>$scope</code> object passed to this view.</p>
<pre><code class="lang-html" name="Main" highlight-lines="9">@{
    Layout = &quot;&quot;;
}
&lt;html&gt;
&lt;body ng-app=&quot;personApp&quot;&gt;
    &lt;div ng-controller=&quot;eventHandlerController&quot;&gt;
        &lt;strong&gt;First Name:&lt;/strong&gt; {{firstName}} &lt;br /&gt;
        &lt;strong&gt;Last Name:&lt;/strong&gt; {{lastName}} &lt;br /&gt;
        &lt;input ng-click=&quot;sayName()&quot; type=&quot;button&quot; value=&quot;Say Name&quot; /&gt;
    &lt;/div&gt;
    &lt;script src=&quot;~/lib/angular/angular.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;~/lib/angular-route/angular-route.js&quot;&gt;&lt;/script&gt;

    &lt;script src=&quot;~/app/personModule.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;~/app/eventHandlerController.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>The running example demonstrates that the controller&#39;s <code>sayName</code> function is called automatically when the button is clicked.</p>
<p><img src="angular/_static/events.png" alt="Click Event"></p>
<p>For more detail on AngularJS built-in event handler directives, be sure to head to the <a href="https://docs.angularjs.org/api/ng/directive/ngClick">documentation website</a> of AngularJS.</p>
<h2 id="additional-resources">Additional resources</h2>
<ul>
<li><p><a href="https://docs.angularjs.org">Angular Docs</a></p>
</li>
<li><p><a href="https://angular.io/">Angular 2 Info</a></p>
</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/aspnet/Docs/blob/w/riande/RP-EF/aspnetcore/client-side/angular.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2015-2017 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
